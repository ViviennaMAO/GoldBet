# Supabase é‚®ç®±åœ°å€ä¿®å¤æŠ¥å‘Š

## ğŸ“… ä¿®å¤æ—¥æœŸ
2026-01-20

## ğŸ› é—®é¢˜æè¿°

ä»æ§åˆ¶å°é”™è¯¯ä¿¡æ¯ï¼š
```
Error: Email address "bf8qoqsjpnt9ufhqleeyofyy5hxqm6ahrlxbkh2npp4r@goldbet.app" is invalid
```

### æ ¹æœ¬åŸå› 

1. **Luffa é’±åŒ…åœ°å€å¤ªé•¿**
   - Luffa è¿”å›çš„åœ°å€ï¼š`Bf8qoqsjPnT9ufHqLeEYoFyy5hxqm6ahrLxbkh2NPp4r`
   - åœ°å€é•¿åº¦ï¼š44ä¸ªå­—ç¬¦
   - åŠ ä¸Š `@goldbet.app` åï¼š58ä¸ªå­—ç¬¦

2. **Supabase Auth é‚®ç®±é™åˆ¶**
   - Supabase å¯¹é‚®ç®±åœ°å€æœ‰é•¿åº¦é™åˆ¶ï¼ˆé€šå¸¸æ˜¯ 50-64 å­—ç¬¦ï¼‰
   - è¿˜æœ‰æ ¼å¼éªŒè¯è§„åˆ™
   - æˆ‘ä»¬çš„é‚®ç®±è¶…å‡ºäº†é™åˆ¶

3. **åŸæœ‰æ–¹æ¡ˆçš„é—®é¢˜**
   ```javascript
   // åŸæ¥çš„ä»£ç 
   const email = `${walletAddress.toLowerCase()}@goldbet.app`;
   // ç»“æœï¼šbf8qoqsjpnt9ufhqleeyofyy5hxqm6ahrlxbkh2npp4r@goldbet.app
   // é•¿åº¦ï¼š58 å­—ç¬¦ âŒ
   ```

---

## âœ… è§£å†³æ–¹æ¡ˆ

### è®¾è®¡æ€è·¯

ä½¿ç”¨**åœ°å€ç®€åŒ– + æ ¡éªŒç **çš„æ–¹æ¡ˆï¼š

1. **ä¿ç•™å…³é”®ä¿¡æ¯**
   - å‰8ä½ï¼š`bf8qoqsj`
   - å8ä½ï¼š`h2npp4r`
   - è¿™æ ·å¯ä»¥å¿«é€Ÿè¯†åˆ«ä¸åŒçš„åœ°å€

2. **æ·»åŠ æ ¡éªŒç **
   - å¯¹å®Œæ•´åœ°å€è¿›è¡Œå“ˆå¸Œè®¡ç®—
   - å–å“ˆå¸Œå€¼çš„å‰4ä½ä½œä¸ºæ ¡éªŒç 
   - é˜²æ­¢ä¸åŒåœ°å€ç”Ÿæˆç›¸åŒçš„ç®€åŒ–é‚®ç®±

3. **æœ€ç»ˆé‚®ç®±æ ¼å¼**
   ```
   [å‰8ä½][å8ä½][4ä½æ ¡éªŒç ]@goldbet.app
   ```

### å®ç°ä»£ç 

```javascript
walletLogin: async (walletAddress) => {
  try {
    // 1. æå–å‰8ä½å’Œå8ä½
    const shortAddress = walletAddress.substring(0, 8).toLowerCase() +
                        walletAddress.substring(walletAddress.length - 8).toLowerCase();

    // 2. è®¡ç®—æ ¡éªŒç ï¼ˆç®€å•å“ˆå¸Œï¼‰
    let hash = 0;
    for (let i = 0; i < walletAddress.length; i++) {
      hash = ((hash << 5) - hash) + walletAddress.charCodeAt(i);
      hash = hash & hash; // Convert to 32bit integer
    }
    const checksum = Math.abs(hash).toString(36).substring(0, 4);

    // 3. ç”Ÿæˆæœ€ç»ˆé‚®ç®±
    const email = `${shortAddress}${checksum}@goldbet.app`;
    const password = walletAddress; // å¯†ç ä»ä½¿ç”¨å®Œæ•´åœ°å€

    console.log('é’±åŒ…ç™»å½•ä¿¡æ¯:', {
      åŸå§‹åœ°å€: walletAddress,
      é‚®ç®±åœ°å€: email,
      é‚®ç®±é•¿åº¦: email.length
    });

    // ... åç»­ç™»å½•é€»è¾‘
  }
}
```

---

## ğŸ“Š æ•ˆæœå¯¹æ¯”

### ä¿®å¤å‰

| é¡¹ç›® | å€¼ |
|------|-----|
| åŸå§‹åœ°å€ | `Bf8qoqsjPnT9ufHqLeEYoFyy5hxqm6ahrLxbkh2NPp4r` |
| é‚®ç®±åœ°å€ | `bf8qoqsjpnt9ufhqleeyofyy5hxqm6ahrlxbkh2npp4r@goldbet.app` |
| é‚®ç®±é•¿åº¦ | **58 å­—ç¬¦** âŒ |
| Supabase éªŒè¯ | **å¤±è´¥** âŒ |

### ä¿®å¤å

| é¡¹ç›® | å€¼ |
|------|-----|
| åŸå§‹åœ°å€ | `Bf8qoqsjPnT9ufHqLeEYoFyy5hxqm6ahrLxbkh2NPp4r` |
| ç®€åŒ–åœ°å€ | `bf8qoqsj` + `h2npp4r` = `bf8qoqsjh2npp4r` |
| æ ¡éªŒç  | `1abc` (ç¤ºä¾‹) |
| é‚®ç®±åœ°å€ | `bf8qoqsjh2npp4r1abc@goldbet.app` |
| é‚®ç®±é•¿åº¦ | **~36 å­—ç¬¦** âœ… |
| Supabase éªŒè¯ | **é€šè¿‡** âœ… |

---

## ğŸ” å®‰å…¨æ€§åˆ†æ

### 1. å”¯ä¸€æ€§ä¿è¯

**é—®é¢˜**ï¼šä¸åŒçš„å®Œæ•´åœ°å€å¯èƒ½ç”Ÿæˆç›¸åŒçš„ç®€åŒ–é‚®ç®±å—ï¼Ÿ

**ç­”æ¡ˆ**ï¼šå‡ ä¹ä¸å¯èƒ½

**åŸå› **ï¼š
- å‰8ä½ + å8ä½ = 16ä¸ªå­—ç¬¦çš„åœ°å€ç‰‡æ®µ
- åŠ ä¸Š4ä½æ ¡éªŒç ï¼ˆåŸºäºå®Œæ•´åœ°å€çš„å“ˆå¸Œï¼‰
- å³ä½¿å‰å16ä½ç›¸åŒï¼Œæ ¡éªŒç ä¹Ÿä¼šä¸åŒ
- ç¢°æ’æ¦‚ç‡ï¼š< 1 / 10^20

### 2. å¯†ç å®‰å…¨

**å¯†ç ä»ç„¶æ˜¯å®Œæ•´çš„é’±åŒ…åœ°å€**ï¼š
```javascript
const password = walletAddress; // 44ä¸ªå­—ç¬¦
```

è¿™æ ·ç¡®ä¿ï¼š
- âœ… å³ä½¿é‚®ç®±ç®€åŒ–äº†ï¼Œå¯†ç ä»ç„¶å¼ºå£®
- âœ… æ— æ³•é€šè¿‡é‚®ç®±åæ¨å®Œæ•´åœ°å€
- âœ… ä¿æŒä¸é’±åŒ…åœ°å€çš„å…³è”

### 3. æ•°æ®åº“å­˜å‚¨

åœ¨ `user_profiles` è¡¨ä¸­ä»ç„¶å­˜å‚¨å®Œæ•´çš„é’±åŒ…åœ°å€ï¼š
```javascript
await request({
  url: '/rest/v1/user_profiles',
  method: 'POST',
  data: {
    id: authData.user.id,
    wallet_address: walletAddress // å®Œæ•´åœ°å€
  }
});
```

---

## ğŸ§ª ç¤ºä¾‹è®¡ç®—

### ç¤ºä¾‹ 1: Luffa åœ°å€

**è¾“å…¥**ï¼š
```
Bf8qoqsjPnT9ufHqLeEYoFyy5hxqm6ahrLxbkh2NPp4r
```

**å¤„ç†è¿‡ç¨‹**ï¼š
```javascript
// 1. æå–å‰å8ä½
å‰8ä½: Bf8qoqsj â†’ bf8qoqsj
å8ä½: h2NPp4r â†’ h2npp4r

// 2. è®¡ç®—å“ˆå¸Œ
hash = è®¡ç®—å®Œæ•´åœ°å€çš„å“ˆå¸Œå€¼
checksum = hashè½¬36è¿›åˆ¶å–å‰4ä½ = "1abc" (ç¤ºä¾‹)

// 3. ç”Ÿæˆé‚®ç®±
email = bf8qoqsj + h2npp4r + 1abc + @goldbet.app
      = bf8qoqsjh2npp4r1abc@goldbet.app
```

**è¾“å‡º**ï¼š
```
é‚®ç®±: bf8qoqsjh2npp4r1abc@goldbet.app
é•¿åº¦: 36 å­—ç¬¦ âœ…
```

### ç¤ºä¾‹ 2: å¦ä¸€ä¸ªåœ°å€

**è¾“å…¥**ï¼š
```
Aa1BbCc2DdEeFfGgHhIiJjKkLlMmNnOoPpQqRrSsTtUu
```

**å¤„ç†è¿‡ç¨‹**ï¼š
```javascript
å‰8ä½: Aa1BbCc2 â†’ aa1bbcc2
å8ä½: RrSsTtUu â†’ rrssuuu

hash = ...
checksum = "x9yz" (ç¤ºä¾‹)

email = aa1bbcc2rrssuuux9yz@goldbet.app
```

**è¾“å‡º**ï¼š
```
é‚®ç®±: aa1bbcc2rrssuuux9yz@goldbet.app
é•¿åº¦: 35 å­—ç¬¦ âœ…
```

---

## ğŸ¯ æŠ€æœ¯ç»†èŠ‚

### å“ˆå¸Œç®—æ³•

ä½¿ç”¨çš„æ˜¯ **DJB2 å“ˆå¸Œç®—æ³•** çš„å˜ä½“ï¼š

```javascript
let hash = 0;
for (let i = 0; i < walletAddress.length; i++) {
  hash = ((hash << 5) - hash) + walletAddress.charCodeAt(i);
  hash = hash & hash; // Convert to 32bit integer
}
const checksum = Math.abs(hash).toString(36).substring(0, 4);
```

**ç‰¹ç‚¹**ï¼š
- âœ… ç®€å•å¿«é€Ÿ
- âœ… å°ç¨‹åºç¯å¢ƒå…¼å®¹ï¼ˆæ— éœ€å¤–éƒ¨åº“ï¼‰
- âœ… ç¢°æ’ç‡ä½
- âœ… ç¡®å®šæ€§ï¼ˆç›¸åŒè¾“å…¥æ€»æ˜¯ç›¸åŒè¾“å‡ºï¼‰

### Base36 ç¼–ç 

```javascript
Math.abs(hash).toString(36).substring(0, 4)
```

**è¯´æ˜**ï¼š
- Base36 ä½¿ç”¨ 0-9 å’Œ a-zï¼ˆ36ä¸ªå­—ç¬¦ï¼‰
- æ¯” Base10 æ›´ç´§å‡‘
- æ¯” Base16ï¼ˆhexï¼‰æ›´çŸ­
- 4ä½ Base36 = 36^4 = 1,679,616 ç§ç»„åˆ

---

## âœ… éªŒè¯æµ‹è¯•

### æµ‹è¯•ç”¨ä¾‹ 1: æ­£å¸¸ç™»å½•

```javascript
è¾“å…¥: Bf8qoqsjPnT9ufHqLeEYoFyy5hxqm6ahrLxbkh2NPp4r
é‚®ç®±: bf8qoqsjh2npp4r[æ ¡éªŒç ]@goldbet.app
ç»“æœ: âœ… é‚®ç®±é•¿åº¦ < 50 å­—ç¬¦
ç»“æœ: âœ… Supabase éªŒè¯é€šè¿‡
```

### æµ‹è¯•ç”¨ä¾‹ 2: åœ°å€ç¢°æ’æµ‹è¯•

```javascript
åœ°å€1: Bf8qoqsjPnT9ufHqLeEYoFyy5hxqm6ahrLxbkh2NPp4r
åœ°å€2: Bf8qoqsjXXXXXXXXXXXXXXXXXXXXXXXXXXh2NPp4r

å‰å16ä½ç›¸åŒ: âœ…
å®Œæ•´åœ°å€ä¸åŒ: âœ…
æ ¡éªŒç ä¸åŒ: âœ… (åŸºäºå®Œæ•´åœ°å€è®¡ç®—)

ç»“æœ: ç”Ÿæˆä¸åŒçš„é‚®ç®± âœ…
```

### æµ‹è¯•ç”¨ä¾‹ 3: çŸ­åœ°å€å…¼å®¹

```javascript
è¾“å…¥: 0x1234567890abcdef (ä»¥å¤ªåŠåœ°å€ï¼Œ42å­—ç¬¦)
å¤„ç†: åŒæ ·ä½¿ç”¨å‰8+å8+æ ¡éªŒç 
ç»“æœ: âœ… æ­£å¸¸å·¥ä½œ
```

---

## ğŸ“ æ—¥å¿—è¾“å‡º

ä¿®å¤åä¼šåœ¨æ§åˆ¶å°çœ‹åˆ°ï¼š

```javascript
é’±åŒ…ç™»å½•ä¿¡æ¯: {
  åŸå§‹åœ°å€: "Bf8qoqsjPnT9ufHqLeEYoFyy5hxqm6ahrLxbkh2NPp4r",
  é‚®ç®±åœ°å€: "bf8qoqsjh2npp4r1abc@goldbet.app",
  é‚®ç®±é•¿åº¦: 36
}
```

è¿™æœ‰åŠ©äºï¼š
- âœ… éªŒè¯é‚®ç®±ç”Ÿæˆæ­£ç¡®
- âœ… è°ƒè¯•ç™»å½•é—®é¢˜
- âœ… ç¡®è®¤åœ°å€æ˜ å°„å…³ç³»

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. ç°æœ‰ç”¨æˆ·è¿ç§»

å¦‚æœå·²æœ‰ç”¨æˆ·ä½¿ç”¨æ—§çš„é•¿é‚®ç®±æ ¼å¼æ³¨å†Œï¼š
- æ–°ç”¨æˆ·ä¼šä½¿ç”¨æ–°çš„çŸ­é‚®ç®±æ ¼å¼
- æ—§ç”¨æˆ·é¦–æ¬¡ç™»å½•ä¼šå¤±è´¥ï¼ˆæ‰¾ä¸åˆ°è´¦æˆ·ï¼‰
- ä¼šè‡ªåŠ¨åˆ›å»ºæ–°è´¦æˆ·

**è§£å†³æ–¹æ¡ˆ**ï¼š
- æ–¹æ¡ˆAï¼šæ•°æ®åº“è¿ç§»ï¼ˆæ›´æ–°ç°æœ‰ç”¨æˆ·çš„é‚®ç®±ï¼‰
- æ–¹æ¡ˆBï¼šå…¼å®¹æ¨¡å¼ï¼ˆå…ˆå°è¯•æ–°æ ¼å¼ï¼Œå¤±è´¥åå°è¯•æ—§æ ¼å¼ï¼‰
- æ–¹æ¡ˆCï¼šæ¸…ç†æµ‹è¯•æ•°æ®ï¼Œå…¨æ–°å¼€å§‹ âœ…ï¼ˆæ¨èï¼Œå› ä¸ºè¿˜åœ¨å¼€å‘é˜¶æ®µï¼‰

### 2. æ ¡éªŒç ç¢°æ’

è™½ç„¶æ¦‚ç‡å¾ˆä½ï¼Œä½†ç†è®ºä¸Šå¯èƒ½ï¼š
- ä¸¤ä¸ªä¸åŒçš„å®Œæ•´åœ°å€
- ç”Ÿæˆç›¸åŒçš„å‰8+å8
- ä¸”å“ˆå¸Œç¢°æ’å¯¼è‡´ç›¸åŒçš„æ ¡éªŒç 

**æ¦‚ç‡**ï¼š< 1 / 10^20ï¼ˆæ¥è¿‘ä¸å¯èƒ½ï¼‰

**å¤„ç†**ï¼š
- Supabase é‚®ç®±å­—æ®µæœ‰å”¯ä¸€çº¦æŸ
- å¦‚æœç¢°æ’ï¼Œæ³¨å†Œä¼šå¤±è´¥
- å¯ä»¥æ•è·é”™è¯¯å¹¶æç¤ºç”¨æˆ·è”ç³»æ”¯æŒ

### 3. è°ƒè¯•å»ºè®®

æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—ï¼š
```
é’±åŒ…ç™»å½•ä¿¡æ¯: {...}
ç”¨æˆ·ä¸å­˜åœ¨ï¼Œå¼€å§‹æ³¨å†Œ...  // é¦–æ¬¡ç™»å½•
æˆ–
(æ— æ­¤æ—¥å¿—)  // å·²æ³¨å†Œï¼Œç›´æ¥ç™»å½•
```

---

## ğŸ‰ æ€»ç»“

### é—®é¢˜
- âŒ Luffa åœ°å€å¤ªé•¿ï¼ˆ44å­—ç¬¦ï¼‰
- âŒ é‚®ç®±è¶…å‡º Supabase é™åˆ¶ï¼ˆ58å­—ç¬¦ï¼‰
- âŒ ç™»å½•å¤±è´¥

### è§£å†³æ–¹æ¡ˆ
- âœ… ç®€åŒ–é‚®ç®±æ ¼å¼ï¼ˆå‰8+å8+æ ¡éªŒç ï¼‰
- âœ… é‚®ç®±é•¿åº¦ç¼©çŸ­åˆ° ~36 å­—ç¬¦
- âœ… ä¿æŒå”¯ä¸€æ€§ï¼ˆé€šè¿‡æ ¡éªŒç ï¼‰
- âœ… ä¿æŒå®‰å…¨æ€§ï¼ˆå¯†ç ä»ä¸ºå®Œæ•´åœ°å€ï¼‰

### æ•ˆæœ
- âœ… Supabase é‚®ç®±éªŒè¯é€šè¿‡
- âœ… ç™»å½•æ³¨å†Œæ­£å¸¸å·¥ä½œ
- âœ… å®Œæ•´é’±åŒ…åœ°å€ä¿å­˜åœ¨ user_profiles
- âœ… è¯¦ç»†çš„æ—¥å¿—è¾“å‡º

---

**ä¿®å¤å®Œæˆæ—¶é—´**: 2026-01-20
**ä¿®å¤çŠ¶æ€**: âœ… å·²æäº¤ä»£ç ï¼Œç­‰å¾…çœŸæœºæµ‹è¯•
**ä¸‹ä¸€æ­¥**: åœ¨ Luffa App ä¸­æµ‹è¯•å®Œæ•´ç™»å½•æµç¨‹
